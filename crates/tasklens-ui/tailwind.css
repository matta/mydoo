/*
 * MAGIC FILE WARNING:
 * The Dioxus CLI (`dx`) specifically looks for a file named `tailwind.css`
 * in the project root.
 *
 * If found, `dx` uses its internal Tailwind CSS compiler (v4+) to process this file
 * and outputs the compiled CSS to `assets/tailwind.css`.
 *
 * This behavior is implicit. Renaming this file or moving it will cause the build
 * system to silently ignore it.
 */
@import "tailwindcss";
@plugin "daisyui" {
  themes:
    corporate --default,
    business --prefersdark;
}
@source "./src/**/*.{rs,html,css}";

/*
 * Safe Area Insets and Mobile Resets
 * Added to improve the mobile "app-like" experience.
 */
:root {
  /*
   * Safe Area Insets (Top)
   * Defines the top safe area (e.g., notch) using the standard `env()` function.
   * Defaults to 0px on rectangular screens. Used to push content down from the status bar/notch.
   */
  --safe-top: env(safe-area-inset-top, 0px);

  /*
   * Safe Area Insets (Bottom)
   * Defines the bottom safe area (e.g., home indicator) using the standard `env()` function.
   * Defaults to 0px on rectangular screens. Used to ensure content isn't obscured by the home bar.
   */
  --safe-bottom: env(safe-area-inset-bottom, 0px);

  /*
   * Safe Area Insets (Left/Right)
   * Defines the left/right safe areas for landscape orientation on notched devices.
   * When the device is rotated, the notch moves to the side, requiring horizontal padding.
   */
  --safe-left: env(safe-area-inset-left, 0px);
  --safe-right: env(safe-area-inset-right, 0px);
}

@theme {
  /* Set light mode to Stone 50 (Off-white/Cream) */
  --color-app-bg: var(--color-stone-50);

  /* Bridge upstream dx-components-theme.css variables into Tailwind utilities.
   * These replace DaisyUI theme tokens (bg-base-*, text-base-content,
   * border-base-*, text-primary) while preserving Tailwind opacity modifiers.
   * Phase 2 will remove these when Tailwind itself is removed.
   */
  --color-app-surface: var(--primary-color-2);
  --color-app-surface-muted: var(--primary-color-4);
  --color-app-surface-subtle: var(--primary-color-5);
  --color-app-border: var(--primary-color-6);
  --color-app-border-strong: var(--primary-color-7);
  --color-app-text: var(--secondary-color-4);
  --color-app-text-muted: var(--secondary-color-5);
  --color-app-text-subtle: var(--secondary-color-6);
  --color-app-accent: var(--focused-border-color);
}

/* System Dark Mode Preference */
@media (prefers-color-scheme: dark) {
  :root {
    --color-app-bg: var(--color-stone-900);
  }
}

@layer base {
  /*
   * Global App-Like Behavior
   * `overscroll-behavior-y: none` prevents the browser's default "pull to refresh" or "rubber-banding"
   * effect on vertical scrolls. This makes the web app feel more like a native application,
   * where the viewport is fixed.
   */
  html,
  body {
    overscroll-behavior-y: none;
    min-height: 100vh;
    font-size: 16px;
  }

  @supports (min-height: 100dvh) {
    html,
    body {
      min-height: 100dvh; /* Dynamic viewport height for mobile browsers */
    }
  }

  body {
    /* Apply the theme-aware variable once */
    /* Also setting text color to ensure contrast in dark mode */
    @apply bg-app-bg text-app-text transition-colors duration-300;
  }

  /*
   * Touch Device Resets
   * We scope these to touch devices (`pointer: coarse`) to avoid degrading the desktop experience.
   */
  @media (pointer: coarse) {
    html,
    body {
      /*
       * Disable Text Selection
       * Prevents accidental text highlighting when tapping UI elements, which is common in native-like apps.
       * Note: Input fields usually override this automatically, but we should be mindful.
       */
      user-select: none;
      -webkit-user-select: none;
    }
  }
}
@keyframes flash-yellow {
  0% {
    background-color: transparent;
  }
  15% {
    background-color: #fef08a; /* yellow-200 */
  }
  100% {
    background-color: transparent;
  }
}

@utility animate-flash {
  animation: flash-yellow 2s ease-out;
}
