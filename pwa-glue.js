window.registerServiceWorker=async()=>{console.log("[PwaGlue] Checking Service Worker requirements...");if(!("serviceWorker"in navigator)){console.warn("[PwaGlue] Service Workers not supported in this browser.");return false;}if(!window.isSecureContext){console.warn("[PwaGlue] Insecure Context (not HTTPS/localhost). Skipping SW registration to prevent crash.");return false;}try{const reg=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});console.log("[PwaGlue] SW Registered Successfully:",reg);return true;}catch(e){console.error("[PwaGlue] SW Registration Failed:",e);return false;}};window.subscribeToServiceWorkerStatus=callback=>{if(!("serviceWorker"in navigator)){callback(false);return;}callback(!!navigator.serviceWorker.controller);navigator.serviceWorker.addEventListener("controllerchange",()=>{callback(!!navigator.serviceWorker.controller);});};