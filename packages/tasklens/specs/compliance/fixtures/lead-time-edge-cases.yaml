# yaml-language-server: $schema=../schemas/test_case.schema.json
name: Lead Time Edge Cases
description: >
  Strictly validates the boundary conditions of the Lead Time Ramp, including
  visibility thresholds (2.1x vs 2.0x) and score capping (max 1.0) for Due Soon
  and Overdue tasks.
initial_state:
  current_time: '2025-01-01T00:00:00Z'
  tasks:
    - id: TooEarly
      title: 2.1x Lead Time
      importance: 1
      desired_credits: 0.0
      due_date: '2025-01-15T02:24:00Z'
    - id: Edge
      title: 2.0x Lead Time
      importance: 1
      desired_credits: 0.0
      due_date: '2025-01-15T00:00:00Z'
    - id: Halfway
      title: 1.5x Lead Time
      importance: 1
      desired_credits: 0.0
      due_date: '2025-01-11T12:00:00Z'
    - id: Standard
      title: 1.0x Lead Time
      importance: 1
      desired_credits: 0.0
      due_date: '2025-01-08T00:00:00Z'
    - id: Critical
      title: 0.5x Lead Time
      importance: 1
      desired_credits: 0.0
      due_date: '2025-01-04T12:00:00Z'
    - id: Immediate
      title: 0.01x Lead Time
      importance: 1
      desired_credits: 0.0
      due_date: '2025-01-01T01:40:48Z'
    - id: Overdue
      title: Overdue Task
      importance: 1
      desired_credits: 0.0
      due_date: '2024-12-31T00:00:00Z'
    - id: Quick
      title: Short Lead Time (1d) at 1.5x
      importance: 1
      desired_credits: 0.0
      lead_time_seconds: 86400
      due_date: '2025-01-02T12:00:00Z'
    - id: LongRef
      title: Long Lead Time (10d) at 1.5x
      importance: 1
      desired_credits: 0.0
      lead_time_seconds: 864000
      due_date: '2025-01-16T00:00:00Z'
steps:
  - name: Verify Ramp Boundaries and Capping
    expected_order:
      - Standard
      - Critical
      - Immediate
      - Overdue
      - Halfway
      - Quick
      - LongRef
    expected_props:
      - id: TooEarly
        is_visible: true
        score: 0.0
        is_ready: false
      - id: Edge
        score: 0.0
        is_visible: true
        is_ready: false
      - id: Halfway
        score: 0.5
        is_visible: true
      - id: Standard
        score: 1.0
        is_visible: true
      - id: Critical
        score: 1.0
        is_visible: true
      - id: Immediate
        score: 1.0
        is_visible: true
      - id: Overdue
        score: 1.0
        is_visible: true
      - id: Quick
        score: 0.5
        is_visible: true
      - id: LongRef
        score: 0.5
        is_visible: true
