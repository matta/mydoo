feature: Sequential Blocking
description: >-
  Verify that in a sequential group, only the first pending task is active
  (visible), and subsequent tasks are blocked.
background:
  current_time: '2023-01-01T12:00:00+00:00'
  timezone_offset: 0
  tasks:
    - id: Group
      title: Sequential Group
      status: Pending
      is_sequential: true
      children:
        - id: Step_A
          title: First Step
          status: Pending
        - id: Step_B
          title: Second Step
          status: Pending
        - id: Step_C
          title: Third Step
          status: Pending
scenarios:
  - name: Legacy Scenario
    steps:
      - legacy_description: Initial State - Step A Active
        then:
          expected_order:
            - Step_A
          expected_props:
            - id: Step_A
              score: 1
              is_ready: true
              is_visible: true
            - id: Step_B
              score: 0
              is_ready: false
              is_visible: true
            - id: Step_C
              is_ready: false
              is_visible: true
      - when:
          task_updates:
            - id: Step_A
              status: Done
              is_acknowledged: true
        legacy_description: Complete Step A
        then:
          expected_order:
            - Step_B
          expected_props:
            - id: Step_A
              score: 1
              is_visible: true
            - id: Step_B
              score: 1
              is_ready: true
              is_visible: true
            - id: Step_C
              is_ready: false
              is_visible: true
      - when:
          task_updates:
            - id: Step_B
              status: Done
              is_acknowledged: true
        legacy_description: Complete Step B
        then:
          expected_order:
            - Step_C
          expected_props:
            - id: Step_B
              is_visible: true
            - id: Step_C
              is_ready: true
              is_visible: true
